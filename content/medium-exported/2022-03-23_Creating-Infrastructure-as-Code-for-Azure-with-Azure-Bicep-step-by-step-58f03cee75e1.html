<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Creating Infrastructure as Code for Azure with Azure Bicep step by step</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Creating Infrastructure as Code for Azure with Azure Bicep step by step</h1>
</header>
<section data-field="subtitle" class="p-summary">
One of the natural steps towards DevOps and Cloud Adoption is to create your Infrastructure using Code. For Azure, the most convenient‚Ä¶
</section>
<section data-field="body" class="e-content">
<section name="2625" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="af08" id="af08" class="graf graf--h3 graf--leading graf--title">Creating Infrastructure as Code for Azure with Azure Bicep step by¬†step</h3><figure name="b97e" id="b97e" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*opFga-VoKoV_iJ_UdsHyIQ.jpeg" data-width="4032" data-height="3024" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*opFga-VoKoV_iJ_UdsHyIQ.jpeg"><figcaption class="imageCaption">Photo by <a href="https://unsplash.com/@golfarisa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/@golfarisa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Arisa Chattasa</a> on¬†<a href="https://unsplash.com/s/photos/boxing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" data-href="https://unsplash.com/s/photos/boxing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Unsplash</a></figcaption></figure><p name="2342" id="2342" class="graf graf--p graf-after--figure">One of the natural steps towards DevOps and Cloud Adoption is to create your Infrastructure using Code. For Azure, the most convenient language for this is Azure Bicep which abstracts several aspects of this complex process, and supports more resources available in Azure than any other tool, making it one of the most powerful Infrastructure as Code tools for Azure.</p><h3 name="f874" id="f874" class="graf graf--h3 graf-after--p">What is Azure¬†Bicep?</h3><p name="a04e" id="a04e" class="graf graf--p graf-after--h3">According to <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/bicep/overview?tabs=bicep" data-href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/bicep/overview?tabs=bicep" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Microsoft Documentation</a>, this is the definition of Bicep:</p><blockquote name="c583" id="c583" class="graf graf--blockquote graf-after--p">Bicep is a domain-specific language (DSL) that uses declarative syntax to deploy Azure resources. In a Bicep file, you define the infrastructure you want to deploy to Azure, and then use that file throughout the development lifecycle to repeatedly deploy your infrastructure.</blockquote><p name="4758" id="4758" class="graf graf--p graf-after--blockquote">In summary, this is an abstraction over ARM templates which simplifies A LOT the development of Infrastructure as Code. Its syntax is much simpler and less verbose than ARM but still has all its capabilities.</p><p name="a00d" id="a00d" class="graf graf--p graf-after--p">As bicep is a DSL, we can consider ARM as an Intermediate Language and we can ‚Äúbuild‚Äù bicep into ARM to perform our deployments. A curiosity is that the name bicep is a play on words for ARM (Azure Resource Manager) üòÑ.</p><figure name="5b42" id="5b42" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*Xj6hKE461XITJs6O.gif" data-width="498" data-height="330" src="https://cdn-images-1.medium.com/max/800/0*Xj6hKE461XITJs6O.gif"></figure><h3 name="e71d" id="e71d" class="graf graf--h3 graf-after--figure">How to create an Azure Resource Group with Azure¬†Bicep?</h3><p name="00d7" id="00d7" class="graf graf--p graf-after--h3">Usually, one of the firsts resources on Azure that we need to create is a Resource Group, as it will group all other resources, and make it easier to administrate.</p><p name="4710" id="4710" class="graf graf--p graf-after--p">Create an Azure Resource Group using Azure Bicep it is quite simple, you need just the name of the resource group and the location that it will be created. Additionally, it is necessary to define the <code class="markup--code markup--p-code"><em class="markup--em markup--p-em">targeScope </em></code>as a subscription, it will be explained in more detail below.</p><figure name="ae5d" id="ae5d" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.githubusercontent.com/wesleycamargo/34f6ac600a5df7619b81d5b8f45fe714?file=00_ResourceGroup.bicep.js"></script></figure><p name="ad28" id="ad28" class="graf graf--p graf-after--figure">It is possible to deploy it in different ways, using Azure PowerShell, Azure CLI, or even Azure API‚Äôs. In this example, we will use Azure CLI to execute the deployment.</p><h3 name="c624" id="c624" class="graf graf--h3 graf-after--p">How to execute an Azure Resource Group deployment with Azure Bicep and Azure¬†CLI?</h3><p name="6063" id="6063" class="graf graf--p graf-after--h3">On the latest versions of Azure CLI, there are different commands to run deployments against different scopes on Azure. To create Azure Resource Groups, it is necessary to use the <em class="markup--em markup--p-em">subscription </em>scope, which was also defined on the bicep template above.</p><p name="4e48" id="4e48" class="graf graf--p graf-after--p">The command used is <code class="markup--code markup--p-code">az deployment sub create</code>¬†:</p><figure name="c217" id="c217" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.githubusercontent.com/wesleycamargo/34f6ac600a5df7619b81d5b8f45fe714?file=00_Deploy-ResourceGroup.ps1.js"></script></figure><p name="c25d" id="c25d" class="graf graf--p graf-after--figure">After running the script, we can check the resource group with the command <code class="markup--code markup--p-code">az group show --name rg-bicepdemo</code>¬†:</p><figure name="4f03" id="4f03" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*VqjeZS9nGltwhUhh5dnfKw.png" data-width="920" data-height="310" src="https://cdn-images-1.medium.com/max/800/1*VqjeZS9nGltwhUhh5dnfKw.png"><figcaption class="imageCaption">Image by¬†author</figcaption></figure><h3 name="df40" id="df40" class="graf graf--h3 graf-after--figure">How to create an Azure Storage Account with Azure Bicep and Azure¬†CLI?</h3><p name="c321" id="c321" class="graf graf--p graf-after--h3">When we will create a ‚Äúcommon‚Äù resource, like Storage Account, Resource Group scope must be used. This is the default behavior of bicep, so it is not necessary to specify like it was for Resource Group creation.</p><figure name="08c3" id="08c3" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.githubusercontent.com/wesleycamargo/34f6ac600a5df7619b81d5b8f45fe714?file=00_StorageAccount.bicep.js"></script></figure><p name="ace7" id="ace7" class="graf graf--p graf-after--figure">To create resources on Resource Group scope, the Azure CLI command used must be <code class="markup--code markup--p-code">az deployment group create</code>¬†:</p><figure name="547e" id="547e" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.githubusercontent.com/wesleycamargo/34f6ac600a5df7619b81d5b8f45fe714?file=00_Deploy-StorageAccount.ps1.js"></script></figure><p name="e062" id="e062" class="graf graf--p graf-after--figure">To check the Storage Account creation run the command <code class="markup--code markup--p-code">az storage account show --name stbicepdemo</code></p><figure name="cd03" id="cd03" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*cpJGnAWnd5Epc1NgkxxQ4A.png" data-width="617" data-height="526" src="https://cdn-images-1.medium.com/max/800/1*cpJGnAWnd5Epc1NgkxxQ4A.png"><figcaption class="imageCaption">Image by¬†author</figcaption></figure><p name="8e62" id="8e62" class="graf graf--p graf-after--figure">As they are in different scopes, it is not possible to run both bicep files with one command, however, I prepared a PowerShell script to run them in sequence:</p><figure name="fabf" id="fabf" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.githubusercontent.com/wesleycamargo/34f6ac600a5df7619b81d5b8f45fe714?file=00_Deploy-Complete.ps1.js"></script></figure><h3 name="0a67" id="0a67" class="graf graf--h3 graf-after--figure">Conclusion</h3><p name="2e74" id="2e74" class="graf graf--p graf-after--h3">Azure Bicep is one of the most promising Infra as Code tools for Azure, and it is quite simple to create new templates for it. Its syntax is very simple and easy to learn, so why not give it a chance?¬†:)</p><p name="7c5f" id="7c5f" class="graf graf--p graf-after--p">See you in the next post!</p><figure name="8653" id="8653" class="graf graf--figure graf-after--p"><a href="https://faun.to/bP1m5" data-href="https://faun.to/bP1m5" class="graf-imageAnchor" data-action="image-link" data-action-observe-only="true"rel="noopener"target="_blank"><img class="graf-image" data-image-id="1*BCiLLad3dvZLwBa-B5cAVQ.png" data-width="1500" data-height="200" src="https://cdn-images-1.medium.com/max/800/1*BCiLLad3dvZLwBa-B5cAVQ.png"></a></figure><p name="3652" id="3652" class="graf graf--p graf-after--figure">Join FAUN: <a href="https://faun.to/i9Pt9" data-href="https://faun.to/i9Pt9" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Website</strong></a><strong class="markup--strong markup--p-strong"> </strong>üíª<strong class="markup--strong markup--p-strong">|</strong><a href="https://faun.dev/podcast" data-href="https://faun.dev/podcast" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Podcast</strong></a><strong class="markup--strong markup--p-strong"> </strong>üéôÔ∏è<strong class="markup--strong markup--p-strong">|</strong><a href="https://twitter.com/joinfaun" data-href="https://twitter.com/joinfaun" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Twitter</strong></a><strong class="markup--strong markup--p-strong"> </strong>üê¶<strong class="markup--strong markup--p-strong">|</strong><a href="https://www.facebook.com/faun.dev/" data-href="https://www.facebook.com/faun.dev/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Facebook</strong></a><strong class="markup--strong markup--p-strong"> </strong>üë•<strong class="markup--strong markup--p-strong">|</strong><a href="https://instagram.com/fauncommunity/" data-href="https://instagram.com/fauncommunity/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Instagram</strong></a><strong class="markup--strong markup--p-strong"> </strong>üì∑|<a href="https://www.facebook.com/groups/364904580892967/" data-href="https://www.facebook.com/groups/364904580892967/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Facebook Group</strong></a><strong class="markup--strong markup--p-strong"> </strong>üó£Ô∏è<strong class="markup--strong markup--p-strong">|</strong><a href="https://www.linkedin.com/company/faundev" data-href="https://www.linkedin.com/company/faundev" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Linkedin Group</strong></a><strong class="markup--strong markup--p-strong"> </strong>üí¨<strong class="markup--strong markup--p-strong">|</strong> <a href="https://faun.dev/chat" data-href="https://faun.dev/chat" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Slack</strong></a> üì±<strong class="markup--strong markup--p-strong">|</strong><a href="https://thechief.io" data-href="https://thechief.io" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Cloud Native</strong> <strong class="markup--strong markup--p-strong">News</strong></a><strong class="markup--strong markup--p-strong"> </strong>üì∞<strong class="markup--strong markup--p-strong">|</strong><a href="https://linktr.ee/faun.dev/" data-href="https://linktr.ee/faun.dev/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">More</strong></a><strong class="markup--strong markup--p-strong">.</strong></p><p name="3062" id="3062" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">If this post was helpful, please click the clap üëè button below a few times to show your support for the author üëá</strong></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@camargo-wes" class="p-author h-card">Wesley Camargo</a> on <a href="https://medium.com/p/58f03cee75e1"><time class="dt-published" datetime="2022-03-23T09:54:57.798Z">March 23, 2022</time></a>.</p><p><a href="https://medium.com/@camargo-wes/creating-infrastructure-as-code-for-azure-with-azure-bicep-step-by-step-58f03cee75e1" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 5, 2025.</p></footer></article></body></html>