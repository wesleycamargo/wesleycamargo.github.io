<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>DataOps Automation — Creating Azure Data Factory with git integration using Bicep</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">DataOps Automation — Creating Azure Data Factory with git integration using Bicep</h1>
</header>
<section data-field="subtitle" class="p-summary">
An important feature available in Azure Data Factory is the git integration, which allows us to keep Azure Data Factory artifacts under…
</section>
<section data-field="body" class="e-content">
<section name="d10f" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="33fd" id="33fd" class="graf graf--h3 graf--leading graf--title">DataOps Automation — Creating Azure Data Factory with git integration using Bicep</h3><p name="3bf1" id="3bf1" class="graf graf--p graf-after--h3">An important feature available in Azure Data Factory is the git integration, which allows us to keep Azure Data Factory artifacts under Source Control. This is a mandatory step to achieve Continuous Integration and Delivery later on, so why not configure this using Infrastructure as Code with Bicep in a fully automated way?</p><figure name="f5e1" id="f5e1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HzDcdeTCGa9vVDuUQulXAQ.png" data-width="1128" data-height="662" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*HzDcdeTCGa9vVDuUQulXAQ.png"><figcaption class="imageCaption">Image prepared by author</figcaption></figure><p name="13b1" id="13b1" class="graf graf--p graf-after--figure">In the <a href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" data-href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">official Microsoft documentation</a> there is a good topic explaining how to integrate Azure Data Factory with git, but through the Azure Portal. In this post, I will explain how to do that using Bicep, the new IaC language for Azure, to make it possible to include this step into your CI/CD process, and also how to deploy only on needed environments.</p><h3 name="3aa2" id="3aa2" class="graf graf--h3 graf-after--p">Azure Data Factory Git integration</h3><p name="f969" id="f969" class="graf graf--p graf-after--h3">Okay, but why do I need to use git on my ADF? To explain this, I’ll list some advantages that the git integration offers, taken from <a href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" data-href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Microsoft’s documentation</a>:</p><h4 name="188b" id="188b" class="graf graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">Source control</strong></h4><p name="065f" id="065f" class="graf graf--p graf-after--h4">As your data factory workloads become crucial, you would want to integrate your factory with Git to leverage several source control benefits like the following:</p><ul class="postList"><li name="c486" id="c486" class="graf graf--li graf-after--p">Ability to track/audit changes.</li><li name="5655" id="5655" class="graf graf--li graf-after--li">Ability to revert changes that introduced bugs.</li></ul><h4 name="9285" id="9285" class="graf graf--h4 graf-after--li"><strong class="markup--strong markup--h4-strong">Partial saves</strong></h4><p name="4797" id="4797" class="graf graf--p graf-after--h4">When authoring against the data factory service, you can’t save changes as a draft and all publish must pass data factory validation. Whether your pipelines are not finished or you simply don’t want to lose changes if your computer crashes, git integration allows for incremental changes of data factory resources regardless of what state they are in. Configuring a git repository allows you to save changes, letting you only publish when you have tested your changes to your satisfaction.</p><h4 name="4dd7" id="4dd7" class="graf graf--h4 graf-after--p">Collaboration and control</h4><p name="823d" id="823d" class="graf graf--p graf-after--h4">If you have multiple team members contributing to the same factory, you may want to let your teammates collaborate with each other via a code review process. You can also set up your factory such that not every contributor has equal permissions. Some team members may only be allowed to make changes via Git and only certain people in the team are allowed to publish the changes to the factory.</p><h4 name="0517" id="0517" class="graf graf--h4 graf-after--p">Better CI/CD</h4><p name="d1df" id="d1df" class="graf graf--p graf-after--h4">If you are deploying to multiple environments with a <a href="https://docs.microsoft.com/en-us/azure/data-factory/continuous-integration-deployment" data-href="https://docs.microsoft.com/en-us/azure/data-factory/continuous-integration-deployment" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">continuous delivery process</a>, git integration makes certain actions easier. Some of these actions include:</p><ul class="postList"><li name="df28" id="df28" class="graf graf--li graf-after--p">Configure your release pipeline to trigger automatically as soon as there are any changes made to your ‘dev’ factory.</li><li name="64d2" id="64d2" class="graf graf--li graf-after--li">Customize the properties in your factory that are available as parameters in the Resource Manager template. It can be useful to keep only the required set of properties as parameters and have everything else hardcoded.</li></ul><h4 name="d89a" id="d89a" class="graf graf--h4 graf-after--li">Better Performance</h4><p name="02e1" id="02e1" class="graf graf--p graf-after--h4">An average factory with git integration loads 10 times faster than one authoring against the data factory service. This performance improvement is because resources are downloaded via Git.</p><h3 name="b158" id="b158" class="graf graf--h3 graf-after--p">Git Integration is only for Development Environment</h3><p name="65b6" id="65b6" class="graf graf--p graf-after--h3">There are two flows recommended by Microsoft to perform CI/CD on ADF, (you can check it on <a href="https://towardsdatascience.com/azure-data-factory-ci-cd-made-simple-building-and-deploying-your-arm-templates-with-azure-devops-30c30595afa5" data-href="https://towardsdatascience.com/azure-data-factory-ci-cd-made-simple-building-and-deploying-your-arm-templates-with-azure-devops-30c30595afa5" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this post</a>), in both cases the development happens in the Development Data Factory workspace only, and the artifacts are promoted through CI/CD deployments. It means that we should not create this integration for non-dev environments like UAT or Production. I will also cover how to identify the environment and create the integration only for your development environment :)</p><h3 name="5179" id="5179" class="graf graf--h3 graf-after--p">Creating Bicep templates for Azure Data Factory step by step</h3><p name="9459" id="9459" class="graf graf--p graf-after--h3">To keep the explanation simple, I’ll show each stage of the bicep file. Each stage is a deployable file that you can execute individually with the command</p><pre name="02b4" id="02b4" class="graf graf--pre graf-after--p"><em class="markup--em markup--pre-em">az deployment group create -f &lt;your file&gt;.bicep -g &lt;your resource group&gt;</em></pre><p name="cb4e" id="cb4e" class="graf graf--p graf-after--pre">In the end, we will have the complete file ready to use.</p><h4 name="c5be" id="c5be" class="graf graf--h4 graf-after--p">Creating Data Factory Workspace</h4><p name="5f1b" id="5f1b" class="graf graf--p graf-after--h4">In the first stage, we are creating only the workspace with the most basic configurations. You can see that for the location we are using the location of the Resource Group where we are executing this deployment.</p><figure name="e8f8" id="e8f8" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/13b8a4702a25082cc97b6630ecf761dd?file=datafactory.bicep.js"></script></figure><h4 name="7ed3" id="7ed3" class="graf graf--h4 graf-after--figure">Linking GitHub with Azure Data Factory</h4><p name="e30f" id="e30f" class="graf graf--p graf-after--h4">In this stage we achieve the first goal of this post: create the <strong class="markup--strong markup--p-strong">git integration. </strong>I include the parameters necessary to connect with a GitHub repo, and then a section into “properties”. Now lets check the parameters:</p><ol class="postList"><li name="8e88" id="8e88" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">accountName </strong>-<strong class="markup--strong markup--li-strong"> </strong>This is your GitHub/Azure DevOps account name.</li><li name="8d0d" id="8d0d" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">repositoryName </strong>- Name of your repository, pay attention that you don’t need your account name at the beginning.</li><li name="70cd" id="70cd" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">collaborationBranc </strong>- The branch that will be used to integrate your feature branches. It will depend on your branch stratety. For git flow, it should be developed branch, for GitHub Flow, master/main.</li><li name="4d08" id="4d08" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">rootFolder </strong>- The folder in your repo where the databricks artifacts will be versioned.</li><li name="8611" id="8611" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">projectName</strong> - This parameter is only used for Azure DevOps. It’s the Team Project name of your repo.</li><li name="06b8" id="06b8" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">type </strong>- This parameter defines if your repo is hosted on GitHub or Azure DevOps. For GitHub, the value must be:</li></ol><pre name="489c" id="489c" class="graf graf--pre graf-after--li">FactoryGitHubConfiguration</pre><p name="e3e3" id="e3e3" class="graf graf--p graf-after--pre">For Azure Devops the value is:</p><pre name="1aad" id="1aad" class="graf graf--pre graf-after--p">FactoryVSTSConfiguration</pre><figure name="5db8" id="5db8" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*kPiiBIbO9dRU8xDRdSdOmg.png" data-width="682" data-height="443" src="https://cdn-images-1.medium.com/max/800/1*kPiiBIbO9dRU8xDRdSdOmg.png"><figcaption class="imageCaption">Image prepared by author</figcaption></figure><h4 name="ce6f" id="ce6f" class="graf graf--h4 graf-after--figure">Checking the environments</h4><p name="705c" id="705c" class="graf graf--p graf-after--h4">As was explained above, we must create git integration in the development environment only. If you are using only GitHub or only Azure DevOps, this stage should be enough for your scenario. To check that, we need the following steps:</p><ol class="postList"><li name="57b0" id="57b0" class="graf graf--li graf-after--p">An environment parameter.</li><li name="b27f" id="b27f" class="graf graf--li graf-after--li">Extract the content of <strong class="markup--strong markup--li-strong">repoConfiguration</strong> to an external variable.</li><li name="e615" id="e615" class="graf graf--li graf-after--li">Use a ternary if to check if the environment provided is development. If it is, then use the variable, if not, use an empty group.</li></ol><figure name="bbca" id="bbca" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*sR-iArVHnrubuSbaaH4a4A.png" data-width="703" data-height="407" src="https://cdn-images-1.medium.com/max/800/1*sR-iArVHnrubuSbaaH4a4A.png"><figcaption class="imageCaption">Image prepared by author</figcaption></figure><p name="25a8" id="25a8" class="graf graf--p graf-after--figure">The bicep file of this stage:</p><figure name="753b" id="753b" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/13b8a4702a25082cc97b6630ecf761dd?file=datafactory-checkenvironment.bicep.js"></script></figure><h4 name="1900" id="1900" class="graf graf--h4 graf-after--figure">Linking GitHub or Azure DevOps to Azure Data Factory</h4><p name="6d92" id="6d92" class="graf graf--p graf-after--h4">In case that in your scenario you have both Azure DevOps and GitHub, you can prepare your template to support that. This template is more flexible and can be used in more situations. Let’s check the differences from the previous one:</p><ol class="postList"><li name="d708" id="d708" class="graf graf--li graf-after--p">Included a “User Friendly” parameter to indicate the type of the repo.</li><li name="1bb7" id="1bb7" class="graf graf--li graf-after--li">Check the type parameter and create a variable with the expected value.</li><li name="3955" id="3955" class="graf graf--li graf-after--li">Create two configurations, one for GitHub and one for Azure DevOps.</li><li name="a12d" id="a12d" class="graf graf--li graf-after--li">Include another ternary if nested into the first one</li></ol><figure name="f4f6" id="f4f6" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*axZ5TeO8PChLhDkzhOEbhA.png" data-width="1160" data-height="691" src="https://cdn-images-1.medium.com/max/800/1*axZ5TeO8PChLhDkzhOEbhA.png"><figcaption class="imageCaption">Image prepared by author</figcaption></figure><p name="7ab9" id="7ab9" class="graf graf--p graf-after--figure">Below you can check the final bicep template:</p><figure name="30c1" id="30c1" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/13b8a4702a25082cc97b6630ecf761dd?file=datafactory-complete.bicep.js"></script></figure><h3 name="1785" id="1785" class="graf graf--h3 graf-after--figure">Real life example</h3><p name="d465" id="d465" class="graf graf--p graf-after--h3">To check these examples in more realistic situations, I have been working in a repository in GitHub with examples of pipelines configured and working. You can check that in the DevOps Nights GitHub here: <a href="https://github.com/devopsnights/azuredevops-yaml-quickstart-templates" data-href="https://github.com/devopsnights/azuredevops-yaml-quickstart-templates" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">devopsnights/azuredevops-yaml-quickstart-templates (github.com)</a></p><p name="6385" id="6385" class="graf graf--p graf-after--p">In <a href="https://towardsdatascience.com/azure-data-factory-ci-cd-made-simple-building-and-deploying-your-arm-templates-with-azure-devops-30c30595afa5" data-href="https://towardsdatascience.com/azure-data-factory-ci-cd-made-simple-building-and-deploying-your-arm-templates-with-azure-devops-30c30595afa5" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this post</a>, I am showing how to consume this Bicep Template into an Azure DevOps Pipeline.</p><p name="e1cc" id="e1cc" class="graf graf--p graf-after--p">I hope this post can help you to create your ADF in a more automated way, and see you in the next post!</p><h4 name="84fa" id="84fa" class="graf graf--h4 graf-after--p">References</h4><p name="1f69" id="1f69" class="graf graf--p graf-after--h4"><a href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" data-href="https://docs.microsoft.com/en-us/azure/data-factory/source-control#advantages-of-git-integration" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Source control — Azure Data Factory | Microsoft Docs</a></p><p name="6f13" id="6f13" class="graf graf--p graf-after--p"><a href="https://docs.microsoft.com/en-us/rest/api/datafactory/factories/configure-factory-repo#factoryvstsconfiguration" data-href="https://docs.microsoft.com/en-us/rest/api/datafactory/factories/configure-factory-repo#factoryvstsconfiguration" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Factories — Configure Factory Repo — REST API (Azure Data Factory) | Microsoft Docs</a></p><p name="5055" id="5055" class="graf graf--p graf-after--p graf--trailing"><a href="https://docs.microsoft.com/en-us/azure/templates/microsoft.datafactory/factories?tabs=json" data-href="https://docs.microsoft.com/en-us/azure/templates/microsoft.datafactory/factories?tabs=json" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Microsoft.DataFactory/factories 2018–06–01 — ARM template reference | Microsoft Docs</a></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@camargo-wes" class="p-author h-card">Wesley Camargo</a> on <a href="https://medium.com/p/376fd3b5bc81"><time class="dt-published" datetime="2021-07-24T22:48:52.111Z">July 24, 2021</time></a>.</p><p><a href="https://medium.com/@camargo-wes/dataops-automation-creating-azure-data-factory-with-git-integration-using-bicep-376fd3b5bc81" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 5, 2025.</p></footer></article></body></html>