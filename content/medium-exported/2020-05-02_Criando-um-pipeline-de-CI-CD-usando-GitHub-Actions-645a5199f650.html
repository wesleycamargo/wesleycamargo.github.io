<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Criando um pipeline de CI/CD usando GitHub Actions</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Criando um pipeline de CI/CD usando GitHub Actions</h1>
</header>
<section data-field="subtitle" class="p-summary">
Nesse post vou demonstrar como criar uma aplicação DotNet core, versionar no GitHub, criar um workflow usando Actions e realizar deploy no…
</section>
<section data-field="body" class="e-content">
<section name="1edc" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="6d6f" id="6d6f" class="graf graf--h3 graf--leading graf--title">Criando um pipeline de CI/CD usando GitHub Actions</h3><p name="890b" id="890b" class="graf graf--p graf-after--h3">Nesse post vou demonstrar como criar uma aplicação DotNet core, versionar no GitHub, criar um workflow usando Actions e realizar deploy no Azure.</p><p name="c4f7" id="c4f7" class="graf graf--p graf-after--p">Para acompanhar esse tutorial, você vai precisar de:</p><ul class="postList"><li name="3e99" id="3e99" class="graf graf--li graf-after--p">Visual Studio Code - Pode ser baixado <a href="https://code.visualstudio.com/download" data-href="https://code.visualstudio.com/download" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">aqui</a></li><li name="0c65" id="0c65" class="graf graf--li graf-after--li">DotNet Core SDK - Pode ser baixado <a href="https://dotnet.microsoft.com/download" data-href="https://dotnet.microsoft.com/download" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">aqui</a></li><li name="1430" id="1430" class="graf graf--li graf-after--li">Uma conta no GitHub</li><li name="a8ee" id="a8ee" class="graf graf--li graf-after--li">Uma conta no Azure</li></ul><p name="6c36" id="6c36" class="graf graf--p graf-after--li">Todos os comandos realizados localmente estão no arquivo abaixo, mas irei explica-los um a um no decorrer do post</p><figure name="81fd" id="81fd" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/c02bf76623181b788e452c2c7fbd52e6.js"></script></figure><h3 name="9745" id="9745" class="graf graf--h3 graf-after--figure">Criando a aplicação</h3><p name="17c0" id="17c0" class="graf graf--p graf-after--h3">Após cumpridos os pré reqs, abra o VS Code, vá em Open folder e selecione uma pasta vazia para criarmos o projeto:</p><figure name="b6b4" id="b6b4" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ui0WEO_7OKSGgN2M9PbE4A.png" data-width="373" data-height="256" src="https://cdn-images-1.medium.com/max/800/1*ui0WEO_7OKSGgN2M9PbE4A.png"></figure><p name="7a94" id="7a94" class="graf graf--p graf-after--figure">Agora vá no menu superior vá em <strong class="markup--strong markup--p-strong">Terminal </strong>-&gt; <strong class="markup--strong markup--p-strong">New Terminal </strong>ou pressione <em class="markup--em markup--p-em">ctrl + ‘,isso irá abrir um terminal na parte inferior da tela. Para verificar a versão do sdk instalada clique nele e digite:</em></p><pre name="33ac" id="33ac" class="graf graf--pre graf-after--p">dotnet --version</pre><p name="99f2" id="99f2" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">No meu caso estou utilizando a versão 3.1.201, caso tenha algum problema durante a execução do tutorial e esteja utilizando uma versão diferente, utilizar essa versão pode te ajudar.</em></p><figure name="c171" id="c171" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_AAY-oPkIg9HbrwnsizM1A.png" data-width="443" data-height="127" src="https://cdn-images-1.medium.com/max/800/1*_AAY-oPkIg9HbrwnsizM1A.png"></figure><p name="edb9" id="edb9" class="graf graf--p graf-after--figure">Agora para criarmos o projeto digite</p><pre name="9111" id="9111" class="graf graf--pre graf-after--p">dotnet new webapp</pre><p name="df3c" id="df3c" class="graf graf--p graf-after--pre">Esse comando irá criar a estrutura da nossa aplicação que nada mais é que um site web baseado em MVC:</p><figure name="c9d9" id="c9d9" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*WsYhHE1qwFyFqYPkK4QQbA.png" data-width="691" data-height="202" src="https://cdn-images-1.medium.com/max/800/1*WsYhHE1qwFyFqYPkK4QQbA.png"></figure><p name="7172" id="7172" class="graf graf--p graf-after--figure">Repare que serão criados alguns arquivos na pasta que selecionamos no início. Eles podem ser vistos no menu Explorer ao lado esquerdo da tela</p><figure name="7791" id="7791" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*7qaqJxH-XhLcJ7imGQjFnQ.png" data-width="371" data-height="324" src="https://cdn-images-1.medium.com/max/800/1*7qaqJxH-XhLcJ7imGQjFnQ.png"></figure><p name="182e" id="182e" class="graf graf--p graf-after--figure">Para verificar se tudo está ok com a aplicação, digite no terminal</p><pre name="d7d9" id="d7d9" class="graf graf--pre graf-after--p">dotnet run</pre><p name="e842" id="e842" class="graf graf--p graf-after--pre">Isso irá compilar e iniciar a aplicação. Aqui também pode ser verificado em qual porta está rodando e acessar para testar</p><figure name="8a9b" id="8a9b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KRkXlY-zDc8Y3KFVqLac2A.png" data-width="472" data-height="250" src="https://cdn-images-1.medium.com/max/800/1*KRkXlY-zDc8Y3KFVqLac2A.png"></figure><figure name="e3a4" id="e3a4" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*Yoclb52yTys4elRfRX_NpA.png" data-width="572" data-height="295" src="https://cdn-images-1.medium.com/max/800/1*Yoclb52yTys4elRfRX_NpA.png"></figure><p name="0c17" id="0c17" class="graf graf--p graf-after--figure">Agora que temos uma aplicação rodando, podemos seguir para a etapa de versionamento.</p><p name="b666" id="b666" class="graf graf--p graf-after--p">Para mais informações sobre comandos do dotnet core veja o conteúdo deste link <a href="https://docs.microsoft.com/pt-br/dotnet/core/tools/" data-href="https://docs.microsoft.com/pt-br/dotnet/core/tools/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://docs.microsoft.com/pt-br/dotnet/core/tools/</a></p><h3 name="daf0" id="daf0" class="graf graf--h3 graf-after--p">Adicionando ao GitHub / controle de versão</h3><p name="733f" id="733f" class="graf graf--p graf-after--h3">Antes de enviar nosso código ao GitHub, primeiro precisamos versionar localmente. Antes de realizar esse versionamento, vamos criar um arquivo chamado <em class="markup--em markup--p-em">.gitignore</em>, onde iremos informar ao git, quais arquivos não queremos que sejam enviados, como binários por exemplo. O próprio dotnet Core possui um template pronto, onde automaticamente são adicionados os arquivos que não queremos versionar. No terminal digite:</p><pre name="153c" id="153c" class="graf graf--pre graf-after--p">dotnet new gitignore</pre><figure name="727f" id="727f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*890wNaAHuUov2HuWgO-GMA.png" data-width="469" data-height="71" src="https://cdn-images-1.medium.com/max/800/1*890wNaAHuUov2HuWgO-GMA.png"></figure><figure name="9db3" id="9db3" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*MZv9nGPc9QVfguqERWvPHg.png" data-width="1094" data-height="738" src="https://cdn-images-1.medium.com/max/800/1*MZv9nGPc9QVfguqERWvPHg.png"></figure><p name="a9f2" id="a9f2" class="graf graf--p graf-after--figure">1. Inicializando nosso repositório e adicionando todos os nossos arquivos para a área de staging.</p><pre name="bdfc" id="bdfc" class="graf graf--pre graf-after--p">git init</pre><pre name="281b" id="281b" class="graf graf--pre graf-after--pre">git add .<br>git status</pre><figure name="d247" id="d247" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*3pibD-rKZP1PS1xljNecaQ.png" data-width="589" data-height="71" src="https://cdn-images-1.medium.com/max/800/1*3pibD-rKZP1PS1xljNecaQ.png"></figure><figure name="be01" id="be01" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*cRNA_rHAGGtS7UaFS_no9g.png" data-width="525" data-height="391" src="https://cdn-images-1.medium.com/max/800/1*cRNA_rHAGGtS7UaFS_no9g.png"></figure><p name="07f7" id="07f7" class="graf graf--p graf-after--figure">Realizando commit das alterações</p><pre name="90f7" id="90f7" class="graf graf--pre graf-after--p">git commit -m &quot;commit inicial&quot;</pre><figure name="9b11" id="9b11" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*HVKSn9IVa6DSs-r3BaU0Sw.png" data-width="546" data-height="383" src="https://cdn-images-1.medium.com/max/800/1*HVKSn9IVa6DSs-r3BaU0Sw.png"></figure><p name="d37b" id="d37b" class="graf graf--p graf-after--figure">Até agora todas as operações que realizamos foram locais. Para enviarmos o código para o GitHub, primeiro precisamos criar um repositório. Acesse sua conta no GitHub e siga os passos abaixo:</p><figure name="b6a1" id="b6a1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HIljyNTqWb0jVrH3qQrgfg.png" data-width="1276" data-height="317" src="https://cdn-images-1.medium.com/max/800/1*HIljyNTqWb0jVrH3qQrgfg.png"></figure><figure name="e927" id="e927" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*K4JZxUpaEpX6datV035Taw.png" data-width="763" data-height="773" src="https://cdn-images-1.medium.com/max/800/1*K4JZxUpaEpX6datV035Taw.png"></figure><p name="867b" id="867b" class="graf graf--p graf-after--figure">Como já temos um repositório criado, copie o código da opção abaixo, cole e execute no terminal:</p><figure name="9a0b" id="9a0b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*t746pMFDe4DWlKE1faIoGQ.png" data-width="1014" data-height="832" src="https://cdn-images-1.medium.com/max/800/1*t746pMFDe4DWlKE1faIoGQ.png"></figure><pre name="3ed7" id="3ed7" class="graf graf--pre graf-after--figure">git remote add origin <a href="https://github.com/wesleycamargo/Pipeline-CICD.git" data-href="https://github.com/wesleycamargo/Pipeline-CICD.git" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://github.com/wesleycamargo/Pipeline-CICD.git</a><br>git push -u origin master</pre><figure name="2ea1" id="2ea1" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*Y3JwSEl19oSZZ-lM3OvteA.png" data-width="822" data-height="265" src="https://cdn-images-1.medium.com/max/800/1*Y3JwSEl19oSZZ-lM3OvteA.png"></figure><p name="696d" id="696d" class="graf graf--p graf-after--figure">Ao atualizar a página do repositório nosso código já estará lá</p><figure name="a17b" id="a17b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*5efmdYAQl8YQiFN28POzoA.png" data-width="1028" data-height="774" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*5efmdYAQl8YQiFN28POzoA.png"></figure><h3 name="0023" id="0023" class="graf graf--h3 graf-after--figure">Criando Action de CI</h3><p name="3504" id="3504" class="graf graf--p graf-after--h3">Na tela anterior clique em Actions, o GitHub deverá identificar que o código da aplicação foi escrito em .NET Core e irá sugerir um template de workflow. Pode selecioná-lo:</p><figure name="0a72" id="0a72" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ywXMxJH3-1_g0QjONb_dRg.png" data-width="907" data-height="603" src="https://cdn-images-1.medium.com/max/800/1*ywXMxJH3-1_g0QjONb_dRg.png"></figure><p name="55b4" id="55b4" class="graf graf--p graf-after--figure">Na tela seguinte será apresentado um arquivo .yml. Nesse momento vamos mante-lo assim, realizando o commit na branch master:</p><figure name="5ab7" id="5ab7" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*knrDZXqVK36ev1z3G0tZNQ.png" data-width="678" data-height="782" src="https://cdn-images-1.medium.com/max/800/1*knrDZXqVK36ev1z3G0tZNQ.png"></figure><figure name="ade5" id="ade5" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*4gjYy7uBYpbqgLzEyz1q7Q.png" data-width="386" data-height="340" src="https://cdn-images-1.medium.com/max/800/1*4gjYy7uBYpbqgLzEyz1q7Q.png"></figure><p name="5d92" id="5d92" class="graf graf--p graf-after--figure">Será criada uma pasta .github/workflows no seu repositório, nela será adicionado um arquivo com o conteúdo abaixo:</p><figure name="b8de" id="b8de" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/5f5b40f41a201f3e8bf8ef95d8e94a43.js"></script></figure><p name="a365" id="a365" class="graf graf--p graf-after--figure">Agora você será redirecionado para a parte de código. Clique novamente em Actions e você irá notar que foi criado um workflow e ele já foi iniciado automaticamente. Clique no evento que foi acionado e no build conforme as imagens:</p><figure name="665e" id="665e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dz7AYBXgKaNs4oFZNTcjlA.png" data-width="1127" data-height="436" src="https://cdn-images-1.medium.com/max/800/1*dz7AYBXgKaNs4oFZNTcjlA.png"></figure><figure name="b58b" id="b58b" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*3U66s-lKGpwX3IhBfTWk4g.png" data-width="1160" data-height="751" src="https://cdn-images-1.medium.com/max/800/1*3U66s-lKGpwX3IhBfTWk4g.png"></figure><p name="d36f" id="d36f" class="graf graf--p graf-after--figure">Observe que é possível visualizar o log da execução do build.</p><p name="8e62" id="8e62" class="graf graf--p graf-after--p">Já temos um build realizando a Continuous Integration(CI) de nossa aplicação.</p><h3 name="169a" id="169a" class="graf graf--h3 graf-after--p">Adicionando Azure Web App Publish Profile ao GitHub</h3><p name="0ec7" id="0ec7" class="graf graf--p graf-after--h3">Vá a um Web App já existente no portal do Azure e clique em Get publish profile.</p><figure name="f547" id="f547" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*3majHLs0wenSKihXcJz1_g.png" data-width="984" data-height="266" src="https://cdn-images-1.medium.com/max/800/1*3majHLs0wenSKihXcJz1_g.png"></figure><p name="45cb" id="45cb" class="graf graf--p graf-after--figure">Será realizado o download de um arquivo com a extensão .PublishSettings. Copie o conteúdo dele.</p><p name="fad9" id="fad9" class="graf graf--p graf-after--p">No GitHub, vá às configurações para adicionar como Secret:</p><figure name="227b" id="227b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*NcJ8M45gPkf_Gri9_b6xCA.png" data-width="1035" data-height="487" src="https://cdn-images-1.medium.com/max/800/1*NcJ8M45gPkf_Gri9_b6xCA.png"></figure><p name="be8c" id="be8c" class="graf graf--p graf-after--figure">Nomeie como AZURE_WEBAPP_PUBLISH_PROFILE e em value adicione o conteúdo do arquivo .PublishSettings</p><figure name="f395" id="f395" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4F2kuZv5VPXAyrfKlY5PLA.png" data-width="758" data-height="327" src="https://cdn-images-1.medium.com/max/800/1*4F2kuZv5VPXAyrfKlY5PLA.png"></figure><h3 name="bc4c" id="bc4c" class="graf graf--h3 graf-after--figure">Publicando a aplicação no Azure</h3><p name="74db" id="74db" class="graf graf--p graf-after--h3">Para configurar o Continuous Delivery(CD) vamos realizar algumas alterações no arquivo yml. Eu acho um pouco difícil editar pela página web, então vou realizar um pull do meu repositório local e editar no VS Code, mas você pode fazer onde for melhor para você =).</p><p name="e9ed" id="e9ed" class="graf graf--p graf-after--p">Primeiro vamos substituir o código anterior por um código mais enxuto e com uma nova função: <em class="markup--em markup--p-em">publish. </em>Vamos adicionar também uma task para realizar o upload dos artefatos gerados:</p><figure name="3005" id="3005" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/wesleycamargo/b563fc5a123b4d779d743caba523ba46.js"></script></figure><p name="1486" id="1486" class="graf graf--p graf-after--figure">Aqui também adicionamos variáveis de ambiente para nossa aplicação. Altere os valores de WebApp_Name e DotNet_Version para os valores de acordo com seu ambiente:</p><pre name="87b8" id="87b8" class="graf graf--pre graf-after--p">env:<br>AZURE_WEBAPP_NAME: webAppAction-wes<br>AZURE_WEBAPP_PACKAGE_PATH: &#39;.&#39;<br>DOTNET_VERSION: &#39;3.1.201&#39;</pre><p name="fb10" id="fb10" class="graf graf--p graf-after--pre">Com a task para realizar o upload dos artefatos, podemos notar que após executar o build podemos baixá-los:</p><figure name="d41a" id="d41a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*8yVX7O0LWDqV-I0JkRPl_w.png" data-width="638" data-height="493" src="https://cdn-images-1.medium.com/max/800/1*8yVX7O0LWDqV-I0JkRPl_w.png"></figure><p name="8d18" id="8d18" class="graf graf--p graf-after--figure">Ao final sua aplicação estará publicada em seu WebApp:</p><figure name="2cab" id="2cab" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*qNyToH28zHlXZfy3uUravA.png" data-width="766" data-height="312" src="https://cdn-images-1.medium.com/max/800/1*qNyToH28zHlXZfy3uUravA.png"></figure><p name="a608" id="a608" class="graf graf--p graf-after--figure">Vou deixar aqui o link do repositório caso queiram visualizar: <a href="https://github.com/wesleycamargo/Pipeline-CICD" data-href="https://github.com/wesleycamargo/Pipeline-CICD" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://github.com/wesleycamargo/Pipeline-CICD</a></p><p name="7f02" id="7f02" class="graf graf--p graf-after--p graf--trailing">Valeu!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@camargo-wes" class="p-author h-card">Wesley Camargo</a> on <a href="https://medium.com/p/645a5199f650"><time class="dt-published" datetime="2020-05-02T00:02:18.302Z">May 2, 2020</time></a>.</p><p><a href="https://medium.com/@camargo-wes/criando-um-pipeline-de-ci-cd-usando-github-actions-645a5199f650" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 5, 2025.</p></footer></article></body></html>